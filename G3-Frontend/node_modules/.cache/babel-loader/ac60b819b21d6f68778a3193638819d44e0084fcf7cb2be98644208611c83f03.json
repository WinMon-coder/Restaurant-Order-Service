{"ast":null,"code":"import html2pdf from \"html2pdf.js\";\nimport { mapGetters } from \"vuex\";\nimport utils from \"@/utils/utils\";\nexport default {\n  data() {\n    return {\n      tableList: [],\n      activeDiscount: {}\n    };\n  },\n  async created() {\n    await this.fetchAllTables();\n    await this.fetchActiveDiscount();\n  },\n  // components: {\n  //   BillPayment,\n  // },\n  computed: {\n    ...mapGetters([\"getTable\", \"totalPrice\", \"getFoodList\"])\n  },\n  methods: {\n    exportToPDF() {\n      html2pdf(document.getElementById(\"element-to-convert\"), {\n        margin: 1,\n        filename: \"bill-vouncher.pdf\"\n      });\n    },\n    async fetchAllTables() {\n      const response = await utils.http.get(\"/table/list_with_order\");\n      if (response) {\n        const data = await response.json();\n        if (data) this.tableList = data;\n      } else {\n        console.log(\"sth wrong\");\n      }\n    },\n    async fetchActiveDiscount() {\n      const resp2 = await utils.http.get(\"/discount/active/discount\");\n      if (resp2) {\n        console.log(resp2);\n        const data = await resp2.json();\n        console.log(data);\n        this.$store.commit(\"SELECT_DISCOUNT\", data);\n        if (data) this.activeDiscount = data;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAuHA;AACA;AACA;AAEA;EACAA;IACA;MACAC;MACAC;IACA;EACA;EAEA;IACA;IACA;EACA;EAEA;EACA;EACA;EACAC;IACA;EACA;EAEAC;IACAC;MACAC;QACAC;QACAC;MACA;IACA;IAEA;MACA;MACA;QACA;QACA;MACA;QACAC;MACA;IACA;IAEA;MACA;MAEA;QACAA;QACA;QACAA;QACA;QACA;MACA;IACA;EACA;AACA","names":["data","tableList","activeDiscount","computed","methods","exportToPDF","html2pdf","margin","filename","console"],"sourceRoot":"src/views","sources":["InvoiceView.vue"],"sourcesContent":["<template>\n  <v-container id=\"element-to-convert\" class=\"mt-4\">\n    <center><h2>INVOICE</h2></center>\n\n    <v-row>\n      <v-spacer></v-spacer>\n      <v-col cols=\"12\" md=\"6\">\n        <strong>Table-{{ getTable.table.tableName }}</strong>\n\n        <br />\n        <strong>Order ID #{{ getTable.table.order.orderId }}</strong>\n        <p>Sale Date : {{ getTable.table.createdAt | formatLocalDate }}</p>\n\n        <justify>\n          <v-list>\n            <v-divider color=\"black\"></v-divider>\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"12\" md=\"1\"><strong>No.</strong> </v-col>\n                <v-col cols=\"12\" md=\"4\"><strong>Item</strong> </v-col>\n                <v-col cols=\"12\" md=\"1\"><strong>Qty</strong> </v-col>\n                <v-col cols=\"12\" md=\"3\"><strong>Unit Price</strong> </v-col>\n                <v-col cols=\"12\" md=\"3\"><strong>Amount</strong> </v-col>\n              </v-row>\n            </v-list-item>\n            <v-divider color=\"black\"></v-divider>\n          </v-list>\n          <v-list\n            v-for=\"(item, index) in getTable.table.order.orderItems\"\n            :key=\"index\"\n          >\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"12\" md=\"1\"\n                  ><strong>{{ index + 1 }}</strong>\n                </v-col>\n                <v-col cols=\"12\" md=\"4\"\n                  ><strong>{{ item.food.foodName }}</strong>\n                </v-col>\n                <v-col cols=\"12\" md=\"1\"\n                  ><strong> {{ item.quantity }}</strong>\n                </v-col>\n                <v-col cols=\"12\" md=\"3\"\n                  ><strong>{{ item.food.foodPrice }}</strong>\n                </v-col>\n                <v-col cols=\"12\" md=\"3\"\n                  ><strong>{{ item.quantity * item.food.foodPrice }}</strong>\n                </v-col>\n              </v-row>\n            </v-list-item>\n          </v-list>\n\n          <v-divider class=\"mb-2\" color=\"black\"></v-divider>\n          <v-list>\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"12\" md=\"1\"><strong></strong> </v-col>\n                <v-col cols=\"12\" md=\"4\"></v-col>\n                <v-col cols=\"12\" md=\"1\"></v-col>\n                <v-col cols=\"12\" md=\"3\"><strong>Sub Total : </strong></v-col>\n                <v-col cols=\"12\" md=\"3\"\n                  ><strong>{{\n                    getTable.table.billTotal +\n                    getTable.table.order.orderDiscountTotal\n                  }}</strong>\n                </v-col>\n              </v-row>\n            </v-list-item>\n          </v-list>\n          <v-list>\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"12\" md=\"1\"><strong></strong> </v-col>\n                <v-col cols=\"12\" md=\"4\"></v-col>\n                <v-col cols=\"12\" md=\"1\"></v-col>\n                <v-col cols=\"12\" md=\"3\"><strong>Discount : </strong></v-col>\n                <v-col cols=\"12\" md=\"3\"\n                  ><strong>{{\n                    getTable.table.order.orderDiscountTotal\n                  }}</strong>\n                </v-col>\n              </v-row>\n            </v-list-item>\n          </v-list>\n          <v-list>\n            <v-list-item>\n              <v-row>\n                <v-col cols=\"12\" md=\"1\"><strong></strong> </v-col>\n                <v-col cols=\"12\" md=\"4\"></v-col>\n                <v-col cols=\"12\" md=\"1\"></v-col>\n                <v-col cols=\"12\" md=\"3\"><strong>Total :</strong></v-col>\n                <v-col cols=\"12\" md=\"3\"\n                  ><strong>{{ getTable.table.billTotal }}</strong>\n                </v-col>\n              </v-row>\n            </v-list-item>\n          </v-list>\n          <v-list>\n            <v-list-item>\n              <v-row>\n                <v-col class=\"\" cols=\"12\">\n                  <center>\n                    <h5 class=\"text-center\">\n                      Thank you , Please come again :)\n                    </h5>\n                  </center>\n                </v-col>\n              </v-row>\n            </v-list-item>\n          </v-list>\n        </justify>\n      </v-col>\n      <v-spacer></v-spacer>\n    </v-row>\n    <button @click=\"exportToPDF\">Export to PDF</button>\n  </v-container>\n</template>\n\n<script>\nimport html2pdf from \"html2pdf.js\";\nimport { mapGetters } from \"vuex\";\nimport utils from \"@/utils/utils\";\n\nexport default {\n  data() {\n    return {\n      tableList: [],\n      activeDiscount: {},\n    };\n  },\n\n  async created() {\n    await this.fetchAllTables();\n    await this.fetchActiveDiscount();\n  },\n\n  // components: {\n  //   BillPayment,\n  // },\n  computed: {\n    ...mapGetters([\"getTable\", \"totalPrice\", \"getFoodList\"]),\n  },\n\n  methods: {\n    exportToPDF() {\n      html2pdf(document.getElementById(\"element-to-convert\"), {\n        margin: 1,\n        filename: \"bill-vouncher.pdf\",\n      });\n    },\n\n    async fetchAllTables() {\n      const response = await utils.http.get(\"/table/list_with_order\");\n      if (response) {\n        const data = await response.json();\n        if (data) this.tableList = data;\n      } else {\n        console.log(\"sth wrong\");\n      }\n    },\n\n    async fetchActiveDiscount() {\n      const resp2 = await utils.http.get(\"/discount/active/discount\");\n\n      if (resp2) {\n        console.log(resp2);\n        const data = await resp2.json();\n        console.log(data);\n        this.$store.commit(\"SELECT_DISCOUNT\", data);\n        if (data) this.activeDiscount = data;\n      }\n    },\n  },\n};\n</script>\n\n<style>\n/* #app {\n      margin-top: 60px;\n      text-align: center;\n    } */\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}