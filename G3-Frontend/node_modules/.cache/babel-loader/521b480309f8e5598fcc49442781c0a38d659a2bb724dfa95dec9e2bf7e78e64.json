{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport utils from \"@/utils/utils\";\nimport SideBar from \"@/components/SideBar.vue\";\nexport default {\n  name: \"profile\",\n  components: {\n    SideBar\n  },\n  data() {\n    return {\n      loginUser: {},\n      localDomain: utils.constant.localDomain,\n      updateDemo: {},\n      dialog: false,\n      update_dialog: false,\n      poster: null,\n      posterPreviewPath: null,\n      errorAlert: false,\n      changePasswordForm: false,\n      show: false,\n      con_new_pwd: \"\",\n      new_pwd: \"\",\n      ori_id: \"\",\n      current_pwd: \"\",\n      errMsg: \"\"\n    };\n  },\n  created() {\n    this.loginUser = this.$store.getters.loginUser;\n  },\n  methods: {\n    // Methods for Profile Update\n    editItem(loginUser) {\n      this.update_dialog = true;\n      this.updateDemo = loginUser;\n      this.poster = this.updateDemo.poster;\n      this.posterPreviewPath = this.updateDemo.posterPreviewPath;\n    },\n    closeUpdate() {\n      this.update_dialog = false;\n    },\n    onChangePoster(poster) {\n      this.posterPreviewPath = URL.createObjectURL(poster);\n    },\n    async updateUserProfile(id) {\n      this.errorAlert = false;\n\n      // Step 1 -> Update Poster\n      // Null -> Poster is not selected\n      if (this.updateDemo.poster != null) {\n        // Update Poster utils.http\n        const respPosterData = await utils.http.putMedia(\"/admin/file/update\", this.updateDemo.poster, this.updateDemo.poster.type, this.updateDemo.userPhoto);\n        if (respPosterData && respPosterData.status === 200) {\n          this.updateDemo.userPhoto = await respPosterData.text();\n        } else {\n          console.debug(\"Poster Update Failed\");\n        }\n      }\n      const resp = await utils.http.put(\"/user/profile/update/\" + id, {\n        userId: this.updateDemo.userId,\n        userFullName: this.updateDemo.userFullName,\n        userEmail: this.updateDemo.userEmail,\n        userPhone: this.updateDemo.userPhone,\n        userAddress: this.updateDemo.userAddress,\n        userPhoto: this.updateDemo.userPhoto\n      });\n      if (resp && resp.status === 200) {\n        this.update_dialog = false;\n      }\n    },\n    // Methods For Change Password\n    changePwd() {\n      this.show = true;\n    },\n    async submit() {\n      const resp = await utils.http.post(\"/user/change_password\", {\n        oriId: this.loginUser.userId,\n        currentPwd: this.current_pwd,\n        newPwd: this.new_pwd,\n        conNewPwd: this.con_new_pwd\n      });\n      if (resp.status === 200) {\n        this.$router.push({\n          path: \"/\"\n        });\n        console.log(\"You Can Successfully update Your Password!!\");\n      } else {\n        this.errorAlert = true;\n        const data = await resp.json();\n        this.errMsg = data.message;\n        console.log(this.loginUser.userId);\n      }\n    },\n    clear() {\n      this.current_pwd = \"\";\n      this.new_pwd = \"\";\n      this.con_new_pwd = \"\";\n    }\n  }\n};","map":{"version":3,"mappings":";AA4VA;AACA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEA;MACA;;MAEA;MACA;MACA;QACA;QACA,iDACA,sBACA,wBACA,6BACA,0BACA;QAEA;UACA;QACA;UACAC;QACA;MACA;MAEA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA;QACA;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;MACA;QACA;UAAAC;QAAA;QACAZ;MACA;QACA;QACA;QACA;QACAA;MACA;IACA;IACAa;MACA;MACA;MACA;IACA;EACA;AACA","names":["name","components","SideBar","data","loginUser","localDomain","updateDemo","dialog","update_dialog","poster","posterPreviewPath","errorAlert","changePasswordForm","show","con_new_pwd","new_pwd","ori_id","current_pwd","errMsg","created","methods","editItem","closeUpdate","onChangePoster","console","userId","userFullName","userEmail","userPhone","userAddress","userPhoto","changePwd","oriId","currentPwd","newPwd","conNewPwd","path","clear"],"sourceRoot":"src/views","sources":["ProfileView.vue"],"sourcesContent":["<template>\n  <div>\n    <SideBar />\n    <template>\n      <v-card max-width=\"375\" class=\"mx-auto\">\n        <v-img :src=\"localDomain + loginUser.userPhoto\" height=\"300px\" dark>\n          <v-btn dark icon class=\"mr-4\">\n            <v-icon color=\"primary\" @click=\"editItem(loginUser)\">\n              mdi-pencil\n            </v-icon>\n          </v-btn>\n        </v-img>\n\n        <v-list two-line>\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon color=\"indigo\"> mdi-phone </v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-subtitle>Mobile</v-list-item-subtitle>\n              <v-list-item-title>(650) 555-1234</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n\n          <v-divider inset></v-divider>\n\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon color=\"indigo\"> mdi-email </v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-subtitle>Email</v-list-item-subtitle>\n              <v-list-item-title>aliconnors@example.com</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n\n          <v-divider inset></v-divider>\n\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon color=\"indigo\"> mdi-map-marker </v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-subtitle>Address</v-list-item-subtitle>\n              <v-list-item-title>1400 Main Street</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n      </v-card>\n    </template>\n    <!-- Profile View -->\n    <v-row>\n      <v-col cols=\"12\" md=\"6\">\n        <v-card class=\"mx-auto my-12\" max-width=\"374\">\n          <v-icon\n            color=\"blue darken-1\"\n            class=\"mr-2\"\n            @click=\"editItem(loginUser)\"\n          >\n            mdi-pencil\n          </v-icon>\n\n          <v-img height=\"250\" :src=\"localDomain + loginUser.userPhoto\"> </v-img>\n\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon small color=\"black\"> fa fa-user </v-icon>\n            </v-list-item-icon>\n            <v-list-item-subtitle>\n              Name : <strong>{{ loginUser.userFullName }}</strong>\n            </v-list-item-subtitle>\n          </v-list-item>\n\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon small color=\"black\">fa fa-envelope</v-icon>\n            </v-list-item-icon>\n            <v-list-item-subtitle>\n              Email :\n              <strong>{{ loginUser.userEmail }}</strong></v-list-item-subtitle\n            >\n          </v-list-item>\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon small color=\"black\"> fa fa-phone </v-icon>\n            </v-list-item-icon>\n            <v-list-item-subtitle>\n              Phone :\n              <strong>{{ loginUser.userPhone }}</strong></v-list-item-subtitle\n            >\n          </v-list-item>\n\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon small color=\"black\">fa fa-map-location</v-icon>\n            </v-list-item-icon>\n            <v-list-item-subtitle>\n              Address :\n              <strong>{{ loginUser.userAddress }}</strong></v-list-item-subtitle\n            >\n          </v-list-item>\n          <v-list-item>\n            <v-list-item-icon>\n              <v-icon small color=\"black\">fa fa-calendar</v-icon>\n            </v-list-item-icon>\n            <v-list-item-subtitle>\n              Join Date :\n              <strong>{{\n                loginUser.startJoinDate\n              }}</strong></v-list-item-subtitle\n            >\n          </v-list-item>\n          <v-list-item>\n            <v-btn text color=\"teal accent-4\" @click=\"changePwd()\">\n              Change Password\n            </v-btn>\n          </v-list-item>\n        </v-card>\n      </v-col>\n      <!-- ---------------------------------------------------------------------------------------------- -->\n      <!-- Change Password View -->\n      <v-col cols=\"12\" md=\"6\">\n        <div v-if=\"show\">\n          <v-card class=\"mx-auto my-12\" max-width=\"500\">\n            <v-toolbar color=\"primary\" dark>\n              <strong>Here You Can Change Your Password !!!</strong>\n              <v-spacer></v-spacer>\n              <v-btn icon @click=\"show = false\">\n                <v-icon>mdi-close</v-icon>\n              </v-btn>\n            </v-toolbar>\n            <v-container>\n              <!-- Current Password -->\n              <v-text-field\n                v-show=\"false\"\n                v-model=\"ori_id\"\n                hidden\n              ></v-text-field>\n              <v-row>\n                <v-col>\n                  <v-text-field\n                    v-model=\"current_pwd\"\n                    :rules=\"[(v) => !!v || 'Required']\"\n                    label=\"Current Password\"\n                    required\n                  >\n                  </v-text-field>\n                </v-col>\n              </v-row>\n\n              <!-- New Password -->\n              <v-row>\n                <v-col>\n                  <v-text-field\n                    v-model=\"new_pwd\"\n                    :rules=\"[(v) => !!v || 'Required']\"\n                    label=\"New Password\"\n                    required\n                  >\n                  </v-text-field>\n                </v-col>\n              </v-row>\n\n              <!-- Confirm New Password -->\n              <v-row>\n                <v-col>\n                  <v-text-field\n                    v-model=\"con_new_pwd\"\n                    :rules=\"[(v) => !!v || 'Required']\"\n                    label=\"Confirm New Password\"\n                    required\n                  >\n                  </v-text-field>\n                </v-col>\n              </v-row>\n              <!-- Submit Btn -->\n              <v-row>\n                <v-col>\n                  <v-btn class=\"mr-4\" @click=\"submit\"> submit </v-btn>\n                </v-col>\n                <!-- Clear Btn -->\n                <v-col>\n                  <v-btn @click=\"clear\"> clear </v-btn>\n                </v-col>\n              </v-row>\n\n              <!-- Error Alert -->\n              <v-alert class=\"mt-3\" v-show=\"errorAlert\" dense type=\"error\">\n                {{ errMsg }} <br />\n              </v-alert>\n            </v-container>\n          </v-card>\n        </div>\n      </v-col>\n    </v-row>\n\n    <!-- ------------------------------------------------------------------------------------------------------ -->\n    <!-- Update Dialog Box-->\n    <v-dialog v-model=\"update_dialog\" max-width=\"500px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h4\">Edit User Profile </span>\n        </v-card-title>\n        <v-card-text>\n          <v-container>\n            <!-- User Name -->\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                <v-text-field\n                  v-model=\"updateDemo.userFullName\"\n                  :rules=\"[\n                    (v) => !!v || 'Required',\n                    (v) =>\n                      (v && v.length <= 50) ||\n                      'Title must be less than 50 characters',\n                  ]\"\n                  label=\"Name\"\n                ></v-text-field>\n              </v-col>\n              <!-- User Role -->\n              <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                <div\n                  v-for=\"(role, index) in this.loginUser.userRoles\"\n                  :key=\"index\"\n                >\n                  <v-text-field\n                    label=\"UserRole\"\n                    v-model=\"role.roleName\"\n                    disabled\n                  >\n                  </v-text-field>\n                </div>\n              </v-col>\n            </v-row>\n\n            <!-- User Email -->\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                <v-text-field\n                  label=\"Email\"\n                  v-model=\"updateDemo.userEmail\"\n                  :rules=\"[\n                    (v) => !!v || 'Required',\n                    (v) => /.+@.+\\..+/.test(v) || 'E-mail must be valid',\n                  ]\"\n                  type=\"text\"\n                  required\n                />\n              </v-col>\n              <!-- User Photo -->\n              <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                <v-text-field\n                  v-model=\"updateDemo.userPhone\"\n                  :rules=\"[\n                    (v) => !!v || 'Required',\n                    (v) =>\n                      (v && v.length <= 50) ||\n                      'Title must be less than 50 characters',\n                  ]\"\n                  label=\"Phone no.\"\n                ></v-text-field>\n              </v-col>\n            </v-row>\n\n            <!-- User Address -->\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\" md=\"6\">\n                <v-text-field\n                  v-model=\"updateDemo.userAddress\"\n                  :rules=\"[\n                    (v) => !!v || 'Required',\n                    (v) =>\n                      (v && v.length <= 50) ||\n                      'Title must be less than 50 characters',\n                  ]\"\n                  label=\"Address\"\n                ></v-text-field>\n              </v-col>\n            </v-row>\n\n            <!-- -------------****** poster start ******-------------------------- -->\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-file-input\n                  v-model=\"updateDemo.poster\"\n                  label=\"Poster\"\n                  show-size\n                  prepend-icon=\"mdi-camera\"\n                  placeholder=\"Choose Poster Image\"\n                  accept=\"image/png, image/jpeg\"\n                  :rules=\"[\n                    (v) => !!v || 'Required',\n                    (v) =>\n                      !v ||\n                      v.size < 10000000 ||\n                      'Image size should be less than 10 MB!',\n                  ]\"\n                  @change=\"onChangePoster\"\n                ></v-file-input>\n              </v-col>\n            </v-row>\n\n            <!-- Poster is not selected (null) -->\n            <v-row>\n              <v-img\n                v-if=\"posterPreviewPath == null\"\n                :src=\"localDomain + updateDemo.userPhoto\"\n                width=\"200\"\n                height=\"150\"\n                contain\n              >\n              </v-img>\n              <!-- Poster is selected (not null) -->\n              <v-img\n                v-if=\"posterPreviewPath != null\"\n                :src=\"posterPreviewPath\"\n                width=\"200\"\n                height=\"150\"\n                contain\n              >\n              </v-img>\n            </v-row>\n            <!-- -------------****** poster end ******-------------------------- -->\n          </v-container>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"brown\" text @click=\"closeUpdate\">Cancel</v-btn>\n          <v-btn\n            color=\"brown\"\n            text\n            @click=\"updateUserProfile(loginUser.userId)\"\n          >\n            Update</v-btn\n          >\n        </v-card-actions>\n        <v-alert class=\"mt-3\" v-show=\"errorAlert\" dense type=\"error\">\n          Update Fail!!\n        </v-alert>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport utils from \"@/utils/utils\";\nimport SideBar from \"@/components/SideBar.vue\";\nexport default {\n  name: \"profile\",\n  components: {\n    SideBar,\n  },\n  data() {\n    return {\n      loginUser: {},\n      localDomain: utils.constant.localDomain,\n      updateDemo: {},\n      dialog: false,\n      update_dialog: false,\n      poster: null,\n      posterPreviewPath: null,\n      errorAlert: false,\n      changePasswordForm: false,\n      show: false,\n      con_new_pwd: \"\",\n      new_pwd: \"\",\n      ori_id: \"\",\n      current_pwd: \"\",\n      errMsg: \"\",\n    };\n  },\n\n  created() {\n    this.loginUser = this.$store.getters.loginUser;\n  },\n\n  methods: {\n    // Methods for Profile Update\n    editItem(loginUser) {\n      this.update_dialog = true;\n      this.updateDemo = loginUser;\n      this.poster = this.updateDemo.poster;\n      this.posterPreviewPath = this.updateDemo.posterPreviewPath;\n    },\n\n    closeUpdate() {\n      this.update_dialog = false;\n    },\n\n    onChangePoster(poster) {\n      this.posterPreviewPath = URL.createObjectURL(poster);\n    },\n\n    async updateUserProfile(id) {\n      this.errorAlert = false;\n\n      // Step 1 -> Update Poster\n      // Null -> Poster is not selected\n      if (this.updateDemo.poster != null) {\n        // Update Poster utils.http\n        const respPosterData = await utils.http.putMedia(\n          \"/admin/file/update\",\n          this.updateDemo.poster,\n          this.updateDemo.poster.type,\n          this.updateDemo.userPhoto\n        );\n\n        if (respPosterData && respPosterData.status === 200) {\n          this.updateDemo.userPhoto = await respPosterData.text();\n        } else {\n          console.debug(\"Poster Update Failed\");\n        }\n      }\n\n      const resp = await utils.http.put(\"/user/profile/update/\" + id, {\n        userId: this.updateDemo.userId,\n        userFullName: this.updateDemo.userFullName,\n        userEmail: this.updateDemo.userEmail,\n        userPhone: this.updateDemo.userPhone,\n        userAddress: this.updateDemo.userAddress,\n        userPhoto: this.updateDemo.userPhoto,\n      });\n\n      if (resp && resp.status === 200) {\n        this.update_dialog = false;\n      }\n    },\n\n    // Methods For Change Password\n    changePwd() {\n      this.show = true;\n    },\n\n    async submit() {\n      const resp = await utils.http.post(\"/user/change_password\", {\n        oriId: this.loginUser.userId,\n        currentPwd: this.current_pwd,\n        newPwd: this.new_pwd,\n        conNewPwd: this.con_new_pwd,\n      });\n      if (resp.status === 200) {\n        this.$router.push({ path: \"/\" });\n        console.log(\"You Can Successfully update Your Password!!\");\n      } else {\n        this.errorAlert = true;\n        const data = await resp.json();\n        this.errMsg = data.message;\n        console.log(this.loginUser.userId);\n      }\n    },\n    clear() {\n      this.current_pwd = \"\";\n      this.new_pwd = \"\";\n      this.con_new_pwd = \"\";\n    },\n  },\n};\n</script>\n\n<style></style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}